<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    </meta>
    <title>Giỏ hàng</title>
    <link rel="stylesheet" type="text/css" href="style1.css">
    <script src="https://kit.fontawesome.com/f20d460fd9.js" crossorigin="anonymous"></script>
    <script src="sanpham.js"></script>
    <script src="giohang.js"></script>

</head>

<body>
    <header>
        <div id="thanhden">
            <div class="tt">
                <a class="sdt" href="sdt.html">Hotline: 0966 158 666 ( 8h-12h , 13h20-17h )</a>
                <a class="bando" href="bando.html">Tìm cửa hàng</a>
                <a class="hoptac" href="hoptac.html">Liên hệ hợp tác</a>
                <a class="them" href="themsanpham.html">Thêm sản phẩm</a>
                <a class="kiemtra" href="kiemtra.html">Kiểm tra đơn hàng</a>
                <a class="dangnhap" href="dangnhap.html">Đăng nhập</a>
                <div class="gach">|</div>
                <a class="dangki" href="dangki.html">Đăng kí</a>
            </div>
        </div>
        <div class="thanhmenu">
            <div class="mathang">
                <div class="logo">
                    <a href="Trangchu.html">
                        <img src="images/logo.jpg" width="200px" height="60px">
                    </a>
                </div>
                <div class="menu">
                    <ul>
                        <li><a href="sanpham.html">Điện Thoại</a>
                            <ul>
                                <li><a href="sanpham.html">Apple</a></li>
                                <li><a href="somilegant.html">SamSung</a></li>
                                <li><a href="vest.html">Oppo</a></li>
                                <li><a href="vestelegant.html">VSmart</a></li>
                                <li><a href="aophong.html">Xiaomi</a></li>
                                <li><a href="quankaki.html">Nokia</a></li>
                                <li><a href="quanau.html">Realme</a></li>
                            </ul>
                        </li>
                        <li><a href="gioithieu.html">Lap Top</a>
                            <ul>
                                <li><a href="sanpham.html">Asus</a></li>
                                <li><a href="somilegant.html">Dell</a></li>
                                <li><a href="vest.html">Macbook</a></li>
                                <li><a href="vestelegant.html">HP</a></li>
                                <li><a href="aophong.html">LG</a></li>
                                <li><a href="quankaki.html">Lenovo</a></li>
                                <li><a href="quanau.html">Máy Tính Để Bàn</a></li>
                            </ul>
                        </li>
                        <li><a href="lienhe.html">Máy Ảnh</a>
                            <ul>
                                <li><a href="sanpham.html">Canon</a></li>
                                <li><a href="somilegant.html">Sony</a></li>
                                <li><a href="vest.html">Fujifilm</a></li>
                                <li><a href="quankaki.html">Nikon</a></li>
                                <li><a href="quanau.html">Gopro</a></li>
                            </ul>
                        </li>
                        <li><a href="tintuc.html">Phụ Kiện</a>
                            <ul>
                                <li><a href="tintuc.html">Tai Nghe</a></li>
                                <li><a href="tuyendung.html">Sạc Pin Dự Phòng</a></li>
                                <li><a href="ctkh.html">Dây Cáp Sạc</a></li>
                                <li><a href="huongdan.html">Loa</a></li>
                                <li><a href="tinnoibo.html">Đồng Hồ Thông Minh</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="timkiem">
                    <input type="text" placeholder="     Nhập thông tin cần tìm kiếm...">
                    <input type="button">
                </div>
                <div class="tim">
                    <a href="sanphamyeuthich.html">
                        <img src="images/tim.jpg" width="40px" height="35px">
                    </a>
                </div>
                <div class="giodo">
                    <a href="giohang.html">
                        <img src="images/giodo.jpg" width="40px" height="35px">
                    </a>
                </div>
            </div>
        </div>
        <div class="slider">
            <div name="slider-item" class="slider-item">
                <img border="0" src="images/slider.jpg" width="1100px" height="400px">
            </div>
            <div name="slider-item" class="slider-item">
                <img border="0" src="images/slider1.jpg" width="1100px" height="400px">
            </div>
            <a onclick="onclickXemAnhTruoc()" class="truoc">&#10094;</a>
            <a onclick="onclickXemAnhSau()" class="sau">&#10095;</a>
        </div>
    </header>
    <section>
        <div id="phangiua">
            <div class="chitiet">
                <ol>
                    <li>Sản Phẩm</li>
                    <li>Tên Sản Phẩm</li>
                    <li class="li1">Gía Bán</li>
                    <li class="li2">Số Lượng</li>
                    <li class="li3">Tổng tiền</li>
                </ol>
                <div id="gio-hang" class="gio-hang">

                </div>
            </div>
            <div class="form">
                <label for="hoTen">Họ và tên</label>
                <input type="text" id="hoTen">
                <label id="loiHoTen" for="hoTen" class="error"></label>

                <label for="soDienThoai">Số điện thoại</label>
                <input type="number" id="soDienThoai">
                <label id="loiSoDienThoai" for="soDienThoai" class="error"></label>

                <label for="diaChiNhan">Địa chỉ nhận</label>
                <input type="text" id="diaChiNhan">
                <label id="loiDiaChiNhan" for="diaChiNhan" class="error"></label>

                <label for="thoiGianNhan">Thời gian nhận nhà (7h-18h)</label>
                <input type="number" id="thoiGianNhan">
                <label id="loiThoiGianNhan" for="thoiGianNhan" class="error"></label>

                <button onclick=onClickDatHang() class="btn">Đặt hàng</button>
            </div>
        </div>
    </section>
    <footer>
        <div class="phancuoi">
            <div class="phancuoi1">
                <div id="dieukhoan">
                    <div class="dieukhoan1">Điều khoản</div>
                    <div class="chinhsach">Chính sách bảo mật</div>
                    <div class="hdsd">Hướng dẫn sử dụng</div>
                    <div class="link">copyright Thegioididong.com. Powered by Haravan interprise</div>
                </div>
                <div class="chungnhan">
                    <img src="images/chungnhan.jpg" width="220px" height="75px">
                </div>
                <div class="giay">Giấy CNĐKDN: 0301340497 được cấp ngày 20/01/1992, được sửa đổi lần thư 20 ngày
                    28/12/2015 bởi Sở Kế hoạch và Đầu Tư TP.HCM </div>
            </div>
        </div>
    </footer>
    <script>
        function onClickDatHang() {
            if (fromDatHangHopLe() == true) {
                console.log('Đang tiến hành giao hàng')
            }
        }

        function fromDatHangHopLe() {
            var hopLe = true;
            var hoTen = document.getElementById('hoTen').value;
            var soDienThoai = document.getElementById('soDienThoai').value;
            var diaChiNhan = document.getElementById('diaChiNhan').value;
            var thoiGianNhan = document.getElementById('thoiGianNhan').value;

            var loiHoTen = document.getElementById('loiHoTen');
            var loiSoDienThoai = document.getElementById('loiSoDienThoai');
            var loiDiaChiNhan = document.getElementById('loiDiaChiNhan');
            var loiThoiGianNhan = document.getElementById('loiThoiGianNhan');
            loiHoTen.innerHTML = '';
            loiSoDienThoai.innerHTML = '';
            loiDiaChiNhan.innerHTML = '';
            loiThoiGianNhan.innerHTML = '';
            /* kiểm tra dữ liệu nhập vào đúng hay sai */
            if (hoTen == null || hoTen.length <= 0) {
                loiHoTen.innerHTML = "Họ tên không được để trống";
                hopLe = false;
            }
            if (soDienThoai == null || soDienThoai.length <= 0) {
                loiSoDienThoai.innerHTML = "Số điện thoại không hợp lệ";
                hopLe = false
            }
            if (diaChiNhan == null || diaChiNhan.length <= 0) {
                loiDiaChiNhan.innerHTML = "Địa chỉ nhận hàng không được bỏ trống";
                hopLe = false
            }
            if (thoiGianNhan == null || thoiGianNhan.length <= 0) {
                loiThoiGianNhan.innerHTML = "Thời gian nhận không hợp lệ và không được bỏ trống";
                hopLe = false
            }
            return hopLe;
        }
    </script>
    <script>
        hienThiGioHang();
        function chuyenDoiTuongItemGioHangSangHTML(itemGioHang) {
            var sanPham = laySanPhamTheoID(itemGioHang.idSanPham);
            var tongTien = itemGioHang.soLuong * sanPham.giaSauKhiGiam();
            var html = '   <div class="item-gio-hang">  ' +
                '               <div class="hinhAnh">  ' +
                '                   <img src="' + sanPham.hinhAnh + '">  ' +
                '               </div>  ' +
                '               <p class="ten">' + sanPham.ten + '</p>  ' +
                '               <div class="gia">  ' +
                '                   <span class="giaGoc">' + sanPham.giaGoc + '</span>  ' +
                '                   <span class="giaBan">' + sanPham.giaSauKhiGiam() + '</span>  ' +
                '               </div>  ' +
                '               <input type="number" class="soLuong" value="' + itemGioHang.soLuong + '" onchange= "thayDoiSoLuong(this,'+ sanPham.idSanPham +')">  ' +
                '               <p class="tongTien">' + tongTien + '</p>  ' +
                '               <div class="hanhDong">  ' +
                '                   <i onclick = "xoaSanPham(' + sanPham.idSanPham + ')" class="far fa-trash-alt"></i>  ' +
                '               </div>  ' +
                '           </div>  ';
            return html;
        }

        function chuyenDanhSachItemGioHangThanhHTML(danhSachItemGioHang) {
            var htmlTong = '';
            for (var i = 0; i < danhSachItemGioHang.length; i++) {
                var html = chuyenDoiTuongItemGioHangSangHTML(danhSachItemGioHang[i]);
                htmlTong = htmlTong + html;
            }
            return htmlTong;
        }

        function hienThiGioHang() {
            /* b1: load giỏ hàng từ localStorage lên */
            var danhSachItemGioHang = layGioHangTuLocalStorage();
            /* b2: chuyển danh sách item giỏ hàng thành html */
            var html = chuyenDanhSachItemGioHangThanhHTML(danhSachItemGioHang);
            /* b3: truy cập node muốn hiển thị , đưa đoạn html vào node  */
            var nodeGioHang = document.getElementById('gio-hang');
            nodeGioHang.innerHTML = html;
        }
        function xoaSanPham(idSanPham) {
            //Remove node
            var nodeCha = event.target.parentElement;
            var nodeSanPham = nodeCha.parentElement;
            nodeSanPham.remove();
            //Remove localStorage
            var danhSachGioHang = JSON.parse(localStorage.getItem('gioHangASM'));
            var viTri = danhSachGioHang.findIndex(gio => gio.idSanPham == idSanPham);
            danhSachGioHang.splice(viTri, 1);
            localStorage.setItem('gioHangASM', JSON.stringify(danhSachGioHang));
        }
        function thayDoiSoLuong(soLuong, idSanPham) {
            var inputChange = getThis.value;
            var sanPhamMuonTD = layGioHangTuLocalStorage();
            if (inputChange > 0) {
                for (var i = 0; i < sanPhamMuonTD.length; i++) {
                    if (sanPhamMuonTD[i].idSanPham == idSanPham) {
                        sanPhamMuonTD[i].soLuong = inputChange;
                        break;
                    }
                }
                luuGioDoXuongLocalStorage(sanPhamMuonTD);
            } else {
                xoaSanPham(idSanPham);
            }
    
        }
    </script>
    <script>
        var viTriSliderHienThiHienTai = 0;
        var danhSachSliderItem = document.getElementsByName('slider-item')
        hienThiSliderItem(viTriSliderHienThiHienTai);

        function onclickXemAnhSau() {
            viTriSliderHienThiHienTai = viTriSliderHienThiHienTai + 1;
            if (viTriSliderHienThiHienTai == danhSachSliderItem.length) {
                viTriSliderHienThiHienTai = 0;
            }
            hienThiSliderItem(viTriSliderHienThiHienTai);
        }

        function onclickXemAnhTruoc() {
            viTriSliderHienThiHienTai = viTriSliderHienThiHienTai - 1;
            if (viTriSliderHienThiHienTai < 0) {
                viTriSliderHienThiHienTai = danhSachSliderItem.length;
                viTriSliderHienThiHienTai = 1;
            }
            hienThiSliderItem(viTriSliderHienThiHienTai);
        }

        function hienThiSliderItem(vitri) {
            for (var i = 0; i < danhSachSliderItem.length; i++) {
                danhSachSliderItem[i].style.display = 'none';
            }
            danhSachSliderItem[vitri].style.display = 'block';
        }
    </script>
</body>

</html>